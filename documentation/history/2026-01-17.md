# 2026-01-17: Village Decorations (Phase 1)

## Accomplished

### Phase 1 Decorations Implementation

Implemented the first phase of the village decoration plan, adding static decorations to enhance the visual variety of the village.

**New Decoration Types Added:**

- `flowerBed` (24x16) - Colorful flower clusters with 3 color variants (red/yellow/teal, purple/orange/red, pink/blue/gold)
- `bush` (20x18) - Small shrubs with 2 green variants
- `rock` (variable 12-20px) - Natural boulders with 3 size variants
- `tallGrass` (24x16) - Swaying grass clumps for zone edges
- `barrel` (16x20) - Wooden storage barrels with 2 wood tone variants
- `crate` (16x16) - Wooden supply crates with cross-plank pattern

### Schema Changes

- Updated `StructureDataSchema` to include new decoration types
- Added `variant` field to structure data for specifying visual variants

### Sprite Generation

- Added 6 new sprite generation functions to `pixel-art-generator.ts`:
    - `generateFlowerBedSprite()` - flower clusters with stems and multi-color petals
    - `generateBushSprite()` - layered ellipse bush with highlights
    - `generateRockSprite()` - variable-size boulders with shadow and cracks
    - `generateTallGrassSprite()` - multiple grass blades with varying heights
    - `generateBarrelSprite()` - wooden barrel with metal bands
    - `generateCrateSprite()` - wooden crate with X-pattern planks

### SpriteManager Updates

- Pre-generates all decoration sprites on initialization
- Supports 4 variants per decoration type

### Village Generator Updates

**Collision-Aware Placement:**

- All decorations use collision detection to avoid overlaps
- Decorations don't overlap with houses, benches, fountain, or other decorations
- `DECORATION_SPACING` constant (8px) ensures minimum gap between elements

**Symmetric Plaza Decorations:**

- 8 flower beds placed symmetrically around plaza edges
- 2 flower beds on each edge (top, bottom, left, right)
- Positioned at 25% and 75% of each edge length

**Zone Decorations:**

- Each zone receives varied decorations:
    - 2 bushes at zone edges
    - 2 rocks at zone edges
    - 2 tall grass clumps at zone edges
    - 1 barrel near houses (if houses exist)
    - 1 crate near houses (if houses exist)
- Edge decorations placed within 30px of zone boundaries
- House-adjacent decorations placed within 30px radius of houses

**Placement Methods:**

- `generateDecorations()` - orchestrates all decoration placement
- `generatePlazaDecorations()` - symmetric plaza flower beds
- `generateZoneDecorations()` - varied decorations per zone
- `findDecorationPosition()` - collision-aware random placement
- `findEdgeDecorationPosition()` - edge-biased placement

### VillageScene Updates

- Added decoration types to `getStructureSize()`, `getStructureZIndex()`, and `getStructureColor()`
- Uses `structure.variant` if available for consistent sprite selection
- Decorations render at appropriate z-levels (ground level for flowers/grass/rocks)

## Technical Details

**Constants Added:**

- `MAX_DECORATION_PLACEMENT_ATTEMPTS = 15`
- `DECORATION_SPACING = 8`
- `DECORATION_SIZES` - size lookup table for each type

**Files Modified:**

- `src/schemas/structure-data.schema.ts` - new decoration types and variant field
- `src/game/graphics/pixel-art-generator.ts` - 6 new sprite functions
- `src/game/graphics/sprite-manager.ts` - decoration sprite loading
- `src/game/world/village-generator.ts` - decoration placement logic
- `src/game/scenes/village-scene.ts` - decoration rendering

## Testing

- All 394 existing tests pass
- TypeScript compilation successful
- Lint and format checks pass
